<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para mi personita especial わ</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #ff85a2;
            background-image: radial-gradient(#ffb3c1 20%, transparent 20%);
            background-size: 40px 40px;
            font-family: 'Courier New', Courier, Consolas, monospace;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: manipulation;
        }

        .corazon-flotante {
            position: absolute;
            font-size: 1.2rem;
            color: rgba(255,105,180,0.7);
            pointer-events: none;
            animation: flotar linear infinite;
            z-index: 1;
        }

        @keyframes flotar {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0.6; }
            100% { transform: translateY(-20vh) rotate(360deg); opacity: 0; }
        }

        #telon {
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            cursor: pointer;
            user-select: none;
        }

        .panel {
            width: 50%;
            height: 100%;
            background: #8a0e2a;
            transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: inset 0 0 120px rgba(0,0,0,0.7);
        }

        .panel-izq { border-right: 6px solid #500010; }
        .panel-der { border-left: 6px solid #500010; }

        .texto-telon {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 101;
            pointer-events: none;
            text-shadow: 3px 3px 12px black;
        }

        .texto-telon h1 { font-size: clamp(2.8rem, 9vw, 4.5rem); margin: 0; letter-spacing: 6px; }

        #carta {
            background: white;
            padding: 25px;
            border: 9px solid #ff0000;   /* ROJO FUERTE para debug */
            border-radius: 18px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.45);
            max-width: 360px;
            width: 90%;
            z-index: 10;
            opacity: 0;
            transform: scale(0.7);
            transition: all 1.2s ease 0.5s;
            text-align: center;
        }

        .mostrar { opacity: 1 !important; transform: scale(1) !important; border: 9px solid #ff4d6d !important; }  /* fuerza visibilidad */

        .particula { position: fixed; pointer-events: none; z-index: 9999; font-size: 2rem; animation: volar 1.4s forwards; }

        @keyframes volar { to { transform: translate(var(--x), var(--y)) scale(0.1) rotate(720deg); opacity: 0; } }

        .abierto .panel-izq { transform: translateX(-100%); }
        .abierto .panel-der { transform: translateX(100%); }
        .abierto .texto-telon { opacity: 0; }
    </style>
</head>
<body>

    <div id="corazones-fondo"></div>

    <div id="telon">
        <div class="panel panel-izq"></div>
        <div class="texto-telon">
            <h1>驴VALENTINE?</h1>
            <p style="font-size: 1.4rem; margin-top: 15px;">Toca para abrir mi amor わ</p>
        </div>
        <div class="panel panel-der"></div>
    </div>

    <div id="carta">
        <div style="min-height: 220px; background: #fff0f3; border-radius: 12px; margin-bottom: 20px;">
            <!-- Foto temporal placeholder -->
            <img src="https://via.placeholder.com/340x220/ff69b4/ffffff?text=Foto+Nuestra+" alt="Nosotros" style="width:100%; height:100%; object-fit: cover; border-radius: 12px;">
        </div>
        
        <div id="texto-maquina" style="font-size: 16px; color: #590d22; font-weight: bold; min-height: 100px;"></div>
        
        <div style="display: flex; justify-content: center; gap: 25px;">
            <button id="btnSi" style="padding: 14px 36px; background: #70e000; color: white; font-weight: bold; border: 3px solid black; border-radius: 14px;">S</button>
            <button id="btnNo" style="padding: 14px 36px; background: #ff4d6d; color: white; font-weight: bold; border: 3px solid black; border-radius: 14px;">NO</button>
        </div>
    </div>

    <script>
        console.log("Script cargado OK");

        const telon = document.getElementById('telon');
        const carta = document.getElementById('carta');
        const textoDiv = document.getElementById('texto-maquina');
        const btnSi = document.getElementById('btnSi');
        const btnNo = document.getElementById('btnNo');

        let yaAbierto = false;

        function crearCorazones() {
            console.log("Creando corazones");
            const container = document.getElementById('corazones-fondo');
            for (let i = 0; i < 12; i++) {
                const corazon = document.createElement('div');
                corazon.classList.add('corazon-flotante');
                corazon.textContent = 'わ';
                corazon.style.left = Math.random() * 100 + 'vw';
                corazon.style.animationDuration = (8 + Math.random() * 8) + 's';
                corazon.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(corazon);
            }
        }

        function abrirTodo(e) {
            if (yaAbierto) return;
            yaAbierto = true;
            console.log("Tel贸n abierto - intentando mostrar carta");

            telon.classList.add('abierto');
            
            // Forzamos visibilidad
            if (carta) {
                carta.classList.add('mostrar');
                console.log("Clase 'mostrar' agregada a #carta");
            } else {
                console.error("Elemento #carta NO encontrado en DOM");
            }

            let i = 0;
            const mensaje = "隆Hola mi amor! Esto es una prueba. Si ves esto, funcion贸 わ";
            textoDiv.textContent = "";
            function escribir() {
                if (i < mensaje.length) {
                    textoDiv.textContent += mensaje[i++];
                    setTimeout(escribir, 60);
                }
            }
            setTimeout(escribir, 800);
        }

        crearCorazones();

        telon.addEventListener('click', abrirTodo);
        telon.addEventListener('touchstart', abrirTodo, { passive: false });

        // Debug botones
        if (btnSi) btnSi.addEventListener('click', () => console.log("Bot贸n S clickeado"));
        if (btnNo) btnNo.addEventListener('click', () => console.log("Bot贸n NO clickeado"));
    </script>
</body>
</html>
