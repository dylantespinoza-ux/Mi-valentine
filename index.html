<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para ti ‚ù§Ô∏è</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #ff85a2;
            background-image: radial-gradient(#ffb3c1 20%, transparent 20%);
            background-size: 30px 30px;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: manipulation; /* Mejora la respuesta t√°ctil */
        }

        /* --- TEL√ìN REALISTA --- */
        #telon {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            display: flex;
            cursor: pointer;
        }

        .panel {
            width: 50%;
            height: 100%;
            background-color: #8a0e2a; 
            position: relative;
            transition: transform 1.5s cubic-bezier(0.7, 0, 0.3, 1);
            /* Sombras para dar efecto de tela pesada */
            box-shadow: inset 0 0 80px rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
        }

        .panel-izq { 
            border-right: 4px solid #500010; 
            justify-content: flex-end;
            transform-origin: left;
        }
        .panel-der { 
            border-left: 4px solid #500010; 
            justify-content: flex-start;
            transform-origin: right;
        }

        /* Texto sobre el tel√≥n */
        .texto-telon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            z-index: 101;
            width: 100%;
            pointer-events: none; /* CLAVE: Permite hacer clic "a trav√©s" del texto */
            transition: opacity 0.5s;
        }

        .texto-telon h1 {
            font-size: 38px;
            text-shadow: 4px 4px 10px rgba(0,0,0,0.8);
            margin-bottom: 10px;
            letter-spacing: 3px;
        }

        .texto-telon p {
            font-size: 14px;
            animation: latido 1.5s infinite;
        }

        @keyframes latido {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
        }

        /* Estados de apertura */
        .abierto .panel-izq { transform: translateX(-100%); }
        .abierto .panel-der { transform: translateX(100%); }
        .abierto .texto-telon { opacity: 0; }
        .abierto { pointer-events: none; }

        /* --- CARTA Y CONTENIDO --- */
        .container {
            background-color: white;
            padding: 20px;
            border: 6px solid #ff4d6d;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            max-width: 320px;
            width: 90%;
            z-index: 10;
            opacity: 0; /* Empieza invisible */
            transform: scale(0.9);
            transition: opacity 1s ease 0.5s, transform 1s ease 0.5s;
        }

        .mostrar-contenido {
            opacity: 1;
            transform: scale(1);
        }

        .foto-pareja {
            width: 100%;
            max-height: 250px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid #ffb3c1;
            margin-bottom: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* Efecto Typewriter */
        #titulo-maquina, #texto-maquina {
            min-height: 24px;
            color: #590d22;
        }
        #titulo-maquina {
            font-size: 20px;
            font-weight: bold;
            color: #ff4d6d;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        #texto-maquina {
            font-size: 16px;
            line-height: 1.4;
            margin-bottom: 20px;
            font-weight: bold;
        }

        /* Botones */
        .botones {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            padding: 12px 25px;
            font-size: 16px;
            font-family: inherit;
            font-weight: bold;
            border: 3px solid black;
            cursor: pointer;
            border-radius: 8px;
            transition: transform 0.1s;
        }

        button:active { transform: scale(0.95); }

        #btnSi { background-color: #70e000; box-shadow: 0 5px 0 #38b000; color: white; text-shadow: 1px 1px 0 black; }
        #btnNo { background-color: #ff4d6d; box-shadow: 0 5px 0 #c9184a; color: white; text-shadow: 1px 1px 0 black; position: relative; transition: all 0.3s ease; }

        /* Part√≠culas de explosi√≥n */
        .particula {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            animation: volar 1s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        @keyframes volar {
            0% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)) scale(0) rotate(360deg); opacity: 0; }
        }

    </style>
</head>
<body>

    <audio id="musica" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3" type="audio/mpeg">
    </audio>

    <div id="telon" onclick="abrirTelon()" ontouchstart="abrirTelon()">
        <div class="panel panel-izq"></div>
        <div class="texto-telon">
            <h1>VALENTINE?</h1>
            <p>Toca la pantalla para abrir...</p>
        </div>
        <div class="panel panel-der"></div>
    </div>

    <div class="container" id="carta">
        <img src="image.png" alt="Nosotros" class="foto-pareja">
        
        <div id="titulo-maquina"></div>
        <div id="texto-maquina"></div>
        
        <div class="botones">
            <button id="btnSi">S√ç</button>
            <button id="btnNo">NO</button>
        </div>
    </div>

    <script>
        // Variables
        const telon = document.getElementById('telon');
        const carta = document.getElementById('carta');
        const musica = document.getElementById('musica');
        const btnSi = document.getElementById('btnSi');
        const btnNo = document.getElementById('btnNo');
        
        const tituloFinal = "¬øQueres ser mi VALENTINE?";
        const mensajeFinal = "Sos la MEJOR persona del mundo. Te amo infinitamente üíï";
        const frasesTroll = ["¬øSegura? ü§®", "Pi√©nsalo bien...", "¬°Casi! üòÇ", "No puedes üö´", "¬°Epa! üèÉ‚Äç‚ôÄÔ∏è", "S√ç es la opci√≥n"];

        let abierto = false;

        // 1. ABRIR TEL√ìN
        function abrirTelon() {
            if (abierto) return;
            abierto = true;

            // Animaci√≥n CSS
            telon.classList.add('abierto');
            carta.classList.add('mostrar-contenido');

            // Intentar reproducir m√∫sica
            musica.volume = 0.5;
            musica.play().catch(e => console.log("Audio requiere interacci√≥n extra"));

            // Iniciar efecto de escritura despu√©s de 1 segundo
            setTimeout(() => {
                escribir(document.getElementById('titulo-maquina'), tituloFinal, 0, () => {
                    escribir(document.getElementById('texto-maquina'), mensajeFinal, 0);
                });
            }, 1000);
        }

        // 2. EFECTO ESCRITURA (Typewriter)
        function escribir(elemento, texto, i, callback) {
            if (i < texto.length) {
                elemento.innerHTML += texto.charAt(i);
                setTimeout(() => escribir(elemento, texto, i + 1, callback), 50); // Velocidad de escritura
            } else if (callback) {
                callback();
            }
        }

        // 3. BOT√ìN "NO" TROLL (Se mueve y cambia texto)
        function moverNo(e) {
            // Evitar comportamiento por defecto en m√≥vil
            if(e.type === 'touchstart') e.preventDefault();

            // Calcular nueva posici√≥n
            const x = Math.random() * (window.innerWidth - btnNo.offsetWidth - 20);
            const y = Math.random() * (window.innerHeight - btnNo.offsetHeight - 20);
            
            btnNo.style.position = "fixed";
            btnNo.style.left = x + "px";
            btnNo.style.top = y + "px";

            // Cambiar frase aleatoria
            const fraseRandom = frasesTroll[Math.floor(Math.random() * frasesTroll.length)];
            btnNo.innerText = fraseRandom;
        }

        // Asignamos eventos al bot√≥n NO
        btnNo.addEventListener('mouseover', moverNo);
        btnNo.addEventListener('touchstart', moverNo);
        btnNo.addEventListener('click', moverNo); // Por si acaso logra clickear

        // 4. EXPLOSI√ìN MIXTA AL DECIR S√ç
        function celebrar(e) {
            if(e.type === 'touchstart') e.preventDefault();
            
            // Obtener coordenadas del toque o clic
            const clientX = e.clientX || (e.touches ? e.touches[0].clientX : window.innerWidth/2);
            const clientY = e.clientY || (e.touches ? e.touches[0].clientY : window.innerHeight/2);

            const iconos = ["‚ù§Ô∏è", "üå∏", "‚ú®", "üíï", "üåπ", "üòª"];

            // Crear 50 part√≠culas
            for (let i = 0; i < 50; i++) {
                const p = document.createElement('div');
                p.innerText = iconos[Math.floor(Math.random() * iconos.length)];
                p.classList.add('particula');
                p.style.left = clientX + 'px';
                p.style.top = clientY + 'px';
                p.style.fontSize = (Math.random() * 20 + 20) + 'px';
                
                // Direcci√≥n aleatoria
                const x = (Math.random() - 0.5) * 500 + 'px';
                const y = (Math.random() - 0.5) * 500 + 'px';
                p.style.setProperty('--x', x);
                p.style.setProperty('--y', y);

                document.body.appendChild(p);
                setTimeout(() => p.remove(), 1000);
            }

            // Alerta final
            setTimeout(() => {
                alert("¬°Sab√≠a que dir√≠as que s√≠! Te amo ‚ù§Ô∏è");
                location.reload();
            }, 1200);
        }

        btnSi.addEventListener('click', celebrar);
        btnSi.addEventListener('touchstart', celebrar);

    </script>
</body>
</html>
